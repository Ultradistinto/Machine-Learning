# Configuration for Airbnb Price Predictor

# Data paths
data:
  train_path: "sample_data/train.csv"
  test_path: "sample_data/test.csv"

# Feature engineering flags
features:
  distance_to_center: true
  bbaa_center: [-34.59977951146896, -58.38320368379193]

  # Time-based features
  last_review_date: true
  days_since_last_review: true
  weeks_since_last_review: true
  months_since_last_review: true
  quarters_since_last_review: true
  years_since_last_review: true

  # Categorical features
  minimum_nights_category: true
  host_multiple_listing: true
  host_price_features: false
  review_ratio: true

# Feature groups for ablation study
# Each group can be toggled on/off to test different feature combinations
feature_groups:
  # Location features
  location:
    enabled: true
    columns:
      - latitude
      - longitude
      - distance_to_center
      - neighbourhood  # Will be one-hot encoded
  
  # Property features
  property:
    enabled: true
    columns:
      - room_type  # Will be one-hot encoded
      - minimum_nights
      - minimum_nights_num
  
  # Host features
  host:
    enabled: true
    columns:
      - calculated_host_listings_count
      - host_has_multiple_listings
  
  # Review features
  reviews:
    enabled: true
    columns:
      - number_of_reviews
      - reviews_per_month
      - reviews_ratio
  
  # Time-based features
  time:
    enabled: true
    columns:
      - last_review
      - days_since_last_review
      - weeks_since_last_review
      - months_since_last_review
      - quarters_since_last_review
      - years_since_last_review

# Ablation study configuration
ablation:
  enabled: false
  # Models to test with each feature combination
  models:
    - linear_regression
    - random_forest
    - gradient_boosting
  # Feature group combinations to test (uses group names from feature_groups)
  # "all" means use all enabled groups, individual groups test with/without that group
  combinations:
    - ["all"]                                    # All features
    - ["location", "property", "host"]          # Without reviews and time
    - ["location", "property", "reviews"]       # Without host and time
    - ["property", "host", "reviews", "time"]  # Without location
    - ["location"]                               # Only location
    - ["property"]                               # Only property
    - ["reviews"]                                # Only reviews

# Data transformation
transformation:
  columns_to_transform:
    - price
    - minimum_nights
    - number_of_reviews
    - reviews_per_month
    - calculated_host_listings_count
    - last_review
    - host_mean_price
    - host_price_range
    - host_min_price
    - host_max_price
    - days_since_last_review
    - weeks_since_last_review
    - months_since_last_review
    - quarters_since_last_review
    - years_since_last_review

# Outlier removal
outliers:
  remove_before_split: false
  remove_after_split: false
  lower_quantile: 0.25
  upper_quantile: 0.75

# Train/test split
split:
  test_size: 0.2
  val_size: 0.2
  random_state: 42

# Model hyperparameters
models:
  linear_regression:
    use_scaling: true

  ridge:
    alpha: 1.0
    use_scaling: true

  lasso:
    alpha: 1.0
    max_iter: 10000
    use_scaling: true

  decision_tree:
    # Default values (used if no grid search or after best params found)
    max_depth: 10
    min_samples_split: 5
    min_samples_leaf: 2
    # Grid search parameter space
    grid_search:
      max_depth: [5, 10, 15, 20, null]
      min_samples_split: [2, 5, 10]
      min_samples_leaf: [1, 2, 4]

  random_forest:
    # Default values
    n_estimators: 100
    max_depth: 10
    min_samples_split: 2
    min_samples_leaf: 1
    n_jobs: -1
    # Grid search parameter space
    grid_search:
      n_estimators: [50, 100, 200]
      max_depth: [10, 20, null]
      min_samples_split: [2, 5]
      min_samples_leaf: [1, 2]

  gradient_boosting:
    # Default values
    n_estimators: 100
    learning_rate: 0.1
    max_depth: 5
    min_samples_split: 2
    min_samples_leaf: 1
    # Grid search parameter space
    grid_search:
      n_estimators: [100, 200]
      learning_rate: [0.01, 0.1, 0.2]
      max_depth: [3, 5, 7]
      min_samples_split: [2, 5]
      min_samples_leaf: [1, 2]

  neural_network:
    # Default values
    hidden_layers: [128, 64]
    learning_rate: 0.001
    epochs: 100
    batch_size: 32
    early_stopping: true
    patience: 10
    # Grid search parameter space
    grid_search:
      hidden_layers: [[64, 32], [128, 64], [128, 64, 32]]
      learning_rate: [0.001, 0.01]

# Cross-validation settings
cross_validation:
  enabled: true
  method: "kfold"  # Options: "kfold", "repeated_holdout"
  n_splits: 5
  n_repeats: 3  # Only used for repeated_holdout
  random_state: 42
  # Whether to run grid search with CV
  grid_search: true
  scoring: "neg_root_mean_squared_error"  # Metric for model selection

# Output
output:
  model_dir: "models/"
  predictions_dir: "predictions/"
